{"version":3,"file":"commonHelpers.js","sources":["../src/js/cat-api.js","../src/js/index.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://api.thecatapi.com/v1';\n\naxios.defaults.headers.common['x-api-key'] =\n  'live_eExR10hETQ1PGkLSXvefxxX5tvuslw5lXSJg9XEiZJSO8ILtQPGLSp0SInZo4dhh';\n\nasync function fetchBreeds() {\n  return await fetch(`${BASE_URL}/breeds`).then(res => {\n    if (!res.ok) {\n      throw new Error('Bad request');\n    }\n    return res.json();\n  });\n}\n\nasync function fetchCatByBreed(breedId) {\n  const params = new URLSearchParams({\n    breed_ids: breedId,\n  });\n\n  return await fetch(`${BASE_URL}/images/search?${params}`).then(res => {\n    if (!res.ok) {\n      throw new Error('Bad request');\n    }\n    return res.json();\n  });\n}\n\nexport { fetchBreeds, fetchCatByBreed };\n","import * as catAPI from './cat-api';\nimport SlimSelect from 'slim-select';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport iziToast from 'izitoast';\n\nconst elements = {\n  select: document.querySelector('.breed-select'),\n  catComtainer: document.querySelector('.cat-info'),\n  loader: document.querySelector('.loader'),\n};\n\nlet all_breeds;\n\ncatAPI\n  .fetchBreeds()\n  .then(data => {\n    all_breeds = data;\n    elements.select.innerHTML = data\n      .map(({ id, name }) => `<option value=\"${id}\">${name}</option>`)\n      .join('');\n    new SlimSelect({ select: elements.select });\n    elements.select.classList.toggle('hiden-elem', false);\n    elements.loader.classList.toggle('hiden-elem', true);\n  })\n  .catch(() => showErrorMassage());\n\nelements.select.addEventListener('change', handlerSelectBreed);\n\nfunction handlerSelectBreed(ev) {\n  elements.catComtainer.classList.toggle('hiden-elem', true);\n  elements.loader.classList.toggle('hiden-elem', false);\n\n  catAPI\n    .fetchCatByBreed(ev.target.value)\n    .then(([{ url: imageURL }]) => {\n      elements.catComtainer.innerHTML = createSelectedCatMarkup(\n        imageURL,\n        all_breeds.find(({ id }) => id === ev.target.value)\n      );\n\n      document\n        .querySelector('.image')\n        .addEventListener('load', handlerLoadImage);\n    })\n    .catch(() => {\n      showErrorMassage();\n      elements.loader.classList.toggle('hiden-elem', true);\n    });\n}\n\nfunction handlerLoadImage() {\n  elements.catComtainer.classList.toggle('hiden-elem', false);\n  elements.loader.classList.toggle('hiden-elem', true);\n}\n\nfunction createSelectedCatMarkup(\n  imgURL,\n  {\n    name,\n    description,\n    adaptability,\n    affection_level,\n    child_friendly,\n    dog_friendly,\n    energy_level,\n    intelligence,\n    temperament,\n  }\n) {\n  return `\n       <img class=\"image\" src=\"${imgURL}\" alt=\"${name}\" />\n       <div> \n       <h2 class=\"breed\">${name}</h2>\n        <p class=\"description\">${description}</p>\n        <p class=\"temperament\"><span class=\"temperament-acent\">Temperament: </span>${temperament}</p>\n        <ul class=\"trait-list\">\n          <li class=\"trait-list-item\"><span class=\"trait-name\">Adaptabylity:</span>${generateStrOfStars(\n            adaptability\n          )}</li>\n           <li class=\"trait-list-item\"><span class=\"trait-name\">Affectionate:</span>${generateStrOfStars(\n             affection_level\n           )}</li>\n          <li class=\"trait-list-item\"><span class=\"trait-name\">Child friendly:</span>${generateStrOfStars(\n            child_friendly\n          )}</li>          \n          <li class=\"trait-list-item\"><span class=\"trait-name\">Dog friendly:</span>${generateStrOfStars(\n            dog_friendly\n          )}</li>\n          <li class=\"trait-list-item\"><span class=\"trait-name\">Energy level:</span>${generateStrOfStars(\n            energy_level\n          )}</li>\n        \n          <li class=\"trait-list-item\"><span class=\"trait-name\">Inteligence:</span>${generateStrOfStars(\n            intelligence\n          )}</li>\n\n        </ul>\n        </div>\n    `;\n}\n\nfunction generateStrOfStars(num) {\n  return Array.from({ length: +num }, x => '‚≠ê').join(' ');\n}\n\nfunction showErrorMassage() {\n  iziToast.error({\n    title: 'Oops!',\n    message: 'Something went wrong! Try reloading the page!',\n    position: 'center',\n  });\n}\n"],"names":["BASE_URL","axios","fetchBreeds","res","fetchCatByBreed","breedId","params","elements","all_breeds","catAPI\n  .fetchBreeds","data","id","name","SlimSelect","showErrorMassage","handlerSelectBreed","ev","catAPI\n    .fetchCatByBreed","imageURL","createSelectedCatMarkup","handlerLoadImage","imgURL","description","adaptability","affection_level","child_friendly","dog_friendly","energy_level","intelligence","temperament","generateStrOfStars","num","x","iziToast"],"mappings":"owBAEA,MAAMA,EAAW,+BAEjBC,EAAM,SAAS,QAAQ,OAAO,aAC5B,wEAEF,eAAeC,GAAc,CAC3B,OAAO,MAAM,MAAM,GAAGF,UAAiB,EAAE,KAAKG,GAAO,CACnD,GAAI,CAACA,EAAI,GACP,MAAM,IAAI,MAAM,aAAa,EAE/B,OAAOA,EAAI,MACf,CAAG,CACH,CAEA,eAAeC,EAAgBC,EAAS,CACtC,MAAMC,EAAS,IAAI,gBAAgB,CACjC,UAAWD,CACf,CAAG,EAED,OAAO,MAAM,MAAM,GAAGL,mBAA0BM,GAAQ,EAAE,KAAKH,GAAO,CACpE,GAAI,CAACA,EAAI,GACP,MAAM,IAAI,MAAM,aAAa,EAE/B,OAAOA,EAAI,MACf,CAAG,CACH,CCtBA,MAAMI,EAAW,CACf,OAAQ,SAAS,cAAc,eAAe,EAC9C,aAAc,SAAS,cAAc,WAAW,EAChD,OAAQ,SAAS,cAAc,SAAS,CAC1C,EAEA,IAAIC,EAEJC,EACgB,EACb,KAAKC,GAAQ,CACZF,EAAaE,EACbH,EAAS,OAAO,UAAYG,EACzB,IAAI,CAAC,CAAE,GAAAC,EAAI,KAAAC,KAAW,kBAAkBD,MAAOC,YAAe,EAC9D,KAAK,EAAE,EACV,IAAIC,EAAW,CAAE,OAAQN,EAAS,MAAQ,CAAA,EAC1CA,EAAS,OAAO,UAAU,OAAO,aAAc,EAAK,EACpDA,EAAS,OAAO,UAAU,OAAO,aAAc,EAAI,CACvD,CAAG,EACA,MAAM,IAAMO,EAAgB,CAAE,EAEjCP,EAAS,OAAO,iBAAiB,SAAUQ,CAAkB,EAE7D,SAASA,EAAmBC,EAAI,CAC9BT,EAAS,aAAa,UAAU,OAAO,aAAc,EAAI,EACzDA,EAAS,OAAO,UAAU,OAAO,aAAc,EAAK,EAEpDU,EACmBD,EAAG,OAAO,KAAK,EAC/B,KAAK,CAAC,CAAC,CAAE,IAAKE,CAAU,CAAA,IAAM,CAC7BX,EAAS,aAAa,UAAYY,EAChCD,EACAV,EAAW,KAAK,CAAC,CAAE,GAAAG,CAAE,IAAOA,IAAOK,EAAG,OAAO,KAAK,CAC1D,EAEM,SACG,cAAc,QAAQ,EACtB,iBAAiB,OAAQI,CAAgB,CAClD,CAAK,EACA,MAAM,IAAM,CACXN,IACAP,EAAS,OAAO,UAAU,OAAO,aAAc,EAAI,CACzD,CAAK,CACL,CAEA,SAASa,GAAmB,CAC1Bb,EAAS,aAAa,UAAU,OAAO,aAAc,EAAK,EAC1DA,EAAS,OAAO,UAAU,OAAO,aAAc,EAAI,CACrD,CAEA,SAASY,EACPE,EACA,CACE,KAAAT,EACA,YAAAU,EACA,aAAAC,EACA,gBAAAC,EACA,eAAAC,EACA,aAAAC,EACA,aAAAC,EACA,aAAAC,EACA,YAAAC,CACD,EACD,CACA,MAAO;AAAA,iCACwBR,WAAgBT;AAAA;AAAA,2BAEtBA;AAAA,iCACMU;AAAA,qFACoDO;AAAA;AAAA,qFAEAC,EACzEP,CACZ;AAAA,sFACsFO,EACzEN,CACb;AAAA,uFACuFM,EAC3EL,CACZ;AAAA,qFACqFK,EACzEJ,CACZ;AAAA,qFACqFI,EACzEH,CACZ;AAAA;AAAA,oFAEoFG,EACxEF,CACZ;AAAA;AAAA;AAAA;AAAA,KAKA,CAEA,SAASE,EAAmBC,EAAK,CAC/B,OAAO,MAAM,KAAK,CAAE,OAAQ,CAACA,GAAOC,GAAK,GAAG,EAAE,KAAK,GAAG,CACxD,CAEA,SAASlB,GAAmB,CAC1BmB,EAAS,MAAM,CACb,MAAO,QACP,QAAS,gDACT,SAAU,QACd,CAAG,CACH"}